
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>nemweb package &#8212; nemweb 0.1a documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to nemweb’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="nemweb-package">
<h1>nemweb package<a class="headerlink" href="#nemweb-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="modules">
<h2>modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-nemweb.nemfile_reader">
<span id="nemfile-reader"></span><h2>nemfile_reader<a class="headerlink" href="#module-nemweb.nemfile_reader" title="Permalink to this headline">¶</a></h2>
<p>Module for reading nemfiles and zipped nemfiles into pandas dataframes</p>
<dl class="class">
<dt id="nemweb.nemfile_reader.ZipFileStreamer">
<em class="property">class </em><code class="descclassname">nemweb.nemfile_reader.</code><code class="descname">ZipFileStreamer</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemfile_reader.ZipFileStreamer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">zipfile.ZipFile</span></code></p>
<p>ZipFile subclass, with method to extract ZipFile as byte stream to memory</p>
<dl class="method">
<dt id="nemweb.nemfile_reader.ZipFileStreamer.extract_stream">
<code class="descname">extract_stream</code><span class="sig-paren">(</span><em>member</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemfile_reader.ZipFileStreamer.extract_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a member from the archive as a byte stream or string steam, using
its full name. ‘member’ may be a filename or a ZipInfo object.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nemweb.nemfile_reader.nemfile_reader">
<code class="descclassname">nemweb.nemfile_reader.</code><code class="descname">nemfile_reader</code><span class="sig-paren">(</span><em>nemfile_object</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemfile_reader.nemfile_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict containing a pandas dataframe each table in a nemfile.
The fileobject needs to be unzipped csv (nemfile), and can be either a file or an
an in stream fileobject.</p>
</dd></dl>

<dl class="function">
<dt id="nemweb.nemfile_reader.nemzip_reader">
<code class="descclassname">nemweb.nemfile_reader.</code><code class="descname">nemzip_reader</code><span class="sig-paren">(</span><em>nemzip_object</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemfile_reader.nemzip_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict containing a pandas dataframe each table in a zipped nemfile.
The fileobject is needs to be a zipped csv (nemzip), and can be either a file or an
in stream fileobject.
Function checks there is only one file to unzip, unzips to a nemfile (csv) in memory,
and passes nemfile_object to nemfile reader.</p>
</dd></dl>

<dl class="function">
<dt id="nemweb.nemfile_reader.zip_streams">
<code class="descclassname">nemweb.nemfile_reader.</code><code class="descname">zip_streams</code><span class="sig-paren">(</span><em>fileobject</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemfile_reader.zip_streams" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator that yields each memeber of a zipfile as a BytesIO stream.
Can take a filename or file-like object (BytesIO object) as an argument.</p>
</dd></dl>

</div>
<div class="section" id="module-nemweb.nemweb_current">
<span id="nemweb-current"></span><h2>nemweb_current<a class="headerlink" href="#module-nemweb.nemweb_current" title="Permalink to this headline">¶</a></h2>
<p>Module for downloading data different ‘CURRENT’ nemweb dataset
(selected data sets from files from <a class="reference external" href="http://www.nemweb.com.au/Reports/CURRENT">http://www.nemweb.com.au/Reports/CURRENT</a>)</p>
<p>Module includes one main superclass for handling generic nemweb current files. A series of
namedtuples (strored in global constant DATASETS) contains the relevant data for specfic datasets.
Datasets included from ‘CURRENT’ index page:</p>
<ul class="simple">
<li>TradingIS_Reports</li>
<li>DispatchIS_Reports</li>
<li>Dispatch_SCADA</li>
<li>Next_Day_Dispatch (DISPATCH_UNIT_SOLUTION)</li>
<li>Next_Day_Actual_Gen (METER_DATA_GEN_DUID)</li>
<li>ROOFTOP_PV/ACTUAL</li>
</ul>
<dl class="attribute">
<dt id="nemweb.nemweb_current.CurrentDataset">
<code class="descclassname">nemweb.nemweb_current.</code><code class="descname">CurrentDataset</code><a class="headerlink" href="#nemweb.nemweb_current.CurrentDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">nemweb.nemweb_current.NemwebCurrentFile</span></code></p>
</dd></dl>

<dl class="class">
<dt id="nemweb.nemweb_current.CurrentFileHandler">
<em class="property">class </em><code class="descclassname">nemweb.nemweb_current.</code><code class="descname">CurrentFileHandler</code><a class="headerlink" href="#nemweb.nemweb_current.CurrentFileHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class for handling ‘CURRENT’ nemweb files from <a class="reference external" href="http://www.nemweb.com.au">http://www.nemweb.com.au</a>
Requires a ‘CurrentDataset’ namedtuple with following fields:</p>
<ul class="simple">
<li>nemweb_name: the name of the dataset to be download (e.g. Dispatch_SCADA)</li>
<li>filename_pattern: a regex expression to match and a determine datetime from filename
on nemweb. As example, for files in the Dispatch_SCADA dataset
(e.g “PUBLIC_DISPATCHSCADA_201806201135_0000000296175732.zip”) the regex
file_patten is PUBLIC_DISPATCHSCADA_([0-9]{12})_[0-9]{16}.zip</li>
<li>the format of the string to strip the datetime from. From the above example, the
match returns ‘201806201135’, so the string is “%Y%m%d%H%M”,</li>
<li>the list of tables to insert from each dataset. This is derived from the 2nd and
3rd column in the nemweb dataset. For example, the 2nd column is in Dispatch_SCADA
is “DISPATCH” and the 3rd is “SCADA_VALUE” and the name is “DISPATCH_UNIT_SCADA”.</li>
</ul>
<p>Several datasets contain multiple tables. Examples can be found in the DATASETS dict 
(nemweb_reader.DATASETS)</p>
<dl class="method">
<dt id="nemweb.nemweb_current.CurrentFileHandler.download">
<code class="descname">download</code><span class="sig-paren">(</span><em>link</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemweb_current.CurrentFileHandler.download" title="Permalink to this definition">¶</a></dt>
<dd><p>Dowloads nemweb zipfile from link into memory as a byteIO object.
nemfile object is returned from the byteIO object</p>
</dd></dl>

<dl class="method">
<dt id="nemweb.nemweb_current.CurrentFileHandler.update_data">
<code class="descname">update_data</code><span class="sig-paren">(</span><em>dataset</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemweb_current.CurrentFileHandler.update_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Main method to process nemweb dataset
- downloads the index page for the dataset
- determines date to start downloading from
- matches the start date against files in the index
- inserts new files into database</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nemweb.nemweb_current.update_datasets">
<code class="descclassname">nemweb.nemweb_current.</code><code class="descname">update_datasets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemweb_current.update_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>function that updates a subset of datasets in contained in DATASETS</p>
</dd></dl>

</div>
<div class="section" id="module-nemweb.nemweb_sqlite">
<span id="nemweb-sqlite"></span><h2>nemweb_sqlite<a class="headerlink" href="#module-nemweb.nemweb_sqlite" title="Permalink to this headline">¶</a></h2>
<p>Module for interfacing with sqlite3 database</p>
<dl class="function">
<dt id="nemweb.nemweb_sqlite.insert">
<code class="descclassname">nemweb.nemweb_sqlite.</code><code class="descname">insert</code><span class="sig-paren">(</span><em>dataframe</em>, <em>table_name</em>, <em>db_name='nemweb_live.db'</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemweb_sqlite.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts dataframe into a table (table name) in an sqlite3 database (db_name).
Database directory needs to be specfied in config.ini file</p>
</dd></dl>

<dl class="function">
<dt id="nemweb.nemweb_sqlite.start_from">
<code class="descclassname">nemweb.nemweb_sqlite.</code><code class="descname">start_from</code><span class="sig-paren">(</span><em>table_name</em>, <em>db_name='nemweb_live.db'</em>, <em>timestamp_col='SETTLEMENTDATE'</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemweb_sqlite.start_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a date to start downloading data from.
Tries determining latest date from table in database. On fail prompts user to input date.</p>
</dd></dl>

<dl class="function">
<dt id="nemweb.nemweb_sqlite.table_latest_record">
<code class="descclassname">nemweb.nemweb_sqlite.</code><code class="descname">table_latest_record</code><span class="sig-paren">(</span><em>table_name</em>, <em>db_name='nemweb_live.db'</em>, <em>timestamp_col='SETTLEMENTDATE'</em><span class="sig-paren">)</span><a class="headerlink" href="#nemweb.nemweb_sqlite.table_latest_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lastest timestamp from a table in an sqlite3 database as a datetime object.
Timestamp fields in nemweb files usually named “SETTLEMENTDATE”, but sometimes
INTERVAL_DATETIME is used.</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">nemweb package</a><ul>
<li><a class="reference internal" href="#modules">modules</a></li>
<li><a class="reference internal" href="#module-nemweb.nemfile_reader">nemfile_reader</a></li>
<li><a class="reference internal" href="#module-nemweb.nemweb_current">nemweb_current</a></li>
<li><a class="reference internal" href="#module-nemweb.nemweb_sqlite">nemweb_sqlite</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to nemweb’s documentation!</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/nemweb.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Dylan McConnell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/nemweb.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>